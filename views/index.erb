<html>

<head>
  <title>Pipeline viewer</title>
  <link rel="stylesheet" href="https://unpkg.com/chota">
  <link href="style.css" rel="stylesheet" />
  <meta charset=utf-8 />
  <meta name="viewport" content="user-scalable=no, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, minimal-ui">
</head>

<body>
  <div class="row">
    <div class="col">
      <h1>Pipeline viewer</h1>
      <p>
        Please paste your compiled pipeline here and then click on "Show".
        <a href="/how-to-get-compiled-pipeline">Click here</a> to see how to get your compiled pipeline using Azure Devops UI.
      </p>
    </div>
  </div>
  <div class="row">
    <div class="col">
      <form action="/read-pipeline" method="post">
        <textarea name="pipeline" id="pipeline" cols="30" rows="10" required></textarea>

        <button type="submit">Show</button>
      </form>
    </div>
  </div>

  <a href="javascript:void(0)" id="theme-switch" onclick="switchMode(this)">☀️</a>

  <script>
    if (window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches) {
      document.body.classList.add("dark");
      document.querySelector('#theme-switch').innerHTML = "🌙"
    }

    function switchMode(el) {
      const bodyClass = document.body.classList;
      bodyClass.contains("dark")
        ? ((el.innerHTML = "☀️"), bodyClass.remove("dark"))
        : ((el.innerHTML = "🌙"), bodyClass.add("dark"));
    }
  </script>
</body>

</html>